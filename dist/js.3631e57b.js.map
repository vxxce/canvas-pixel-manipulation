{"version":3,"sources":["js/transformations.js","js/index.js"],"names":["shuffle","arr","i","length","randIndInRange","Math","floor","random","swap","shufflePixels","canvas","ctx","imgData","getImageData","width","height","data","putImageData","channel1","channel2","colors","swap1","indexOf","swap2","Error","temp","invert","newData","j","push","sortPixels","imageSmoothingEnabled","Uint32Array","checkpoint","sort","a","b","entries","n","document","getElementById","getContext","invertEm","swapEm","shuffleEm","sortButton","upload","resetButton","img","uploadHandler","file","files","src","URL","createObjectURL","draw","drawImage","revokeObjectURL","complete","addEventListener","querySelector","value"],"mappings":"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","file":"js.3631e57b.js","sourceRoot":"..","sourcesContent":["const shuffle = (arr) => {\n  for (let i = 0; i < arr.length; i++) {\n    // Every 4th index is an alpha value and should be 255. Don't change those.\n    if (i % 4 !== 3) {\n      // Selection range shrinks by one from left every loop\n      // e.g. [0, 1, 2, 3] -> [1, 2, 3] -> [2, 3] -> [3]\n      let randIndInRange = Math.floor(Math.random() * arr.length - 1) + 1;\n        // If selection is on 4th index (an alpha value), re-select.\n        while (randIndInRange % 4 === 3) {\n          randIndInRange = Math.floor(Math.random() * arr.length - 1) + 1;\n        }\n      // swap i and random index\n      let swap = arr[i];\n      arr[i] = arr[randIndInRange];\n      arr[randIndInRange] = swap;\n    }\n  }\n  return arr;\n}\n\nconst shufflePixels = (canvas, ctx) => {\n  let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  let data = imgData.data;\n  data = shuffle(data);\n  ctx.putImageData(imgData, 0, 0);\n}\n\nconst swap = (canvas, ctx, channel1, channel2) => {\n  const colors = ['red', 'green', 'blue'];\n  const swap1 =  colors.indexOf(channel1);\n  const swap2 =  colors.indexOf(channel2);\n  if (swap1 < 0 || swap2 < 0) throw new Error('Invalid Arguments');\n  let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  let data = imgData.data;\n\n  for (let i = 0; i < data.length; i += 4) {\n    let temp = data[i + swap1];\n    data[i + swap1] = data[i + swap2];\n    data[i + swap2] = temp;\n  }\n  ctx.putImageData(imgData, 0, 0);\n}\n\nconst invert = (canvas, ctx) => {\n  let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  let data = imgData.data;\n  let newData = [];\n\n  for (let j = 0; j < data.length; j += 4) {\n    newData.push(255 - data[j], 255 - data[j+1], 255 - data[j+2], 255);\n  }\n  for (let i = 0; i < data.length; i++) {\n    data[i] = newData[i];\n  }\nctx.putImageData(imgData, 0, 0);\n}\n\nconst sortPixels = (canvas, ctx) => {\n  ctx.imageSmoothingEnabled = false;\n  let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height);\n  let data = imgData.data;\n\n  let newData = new Uint32Array(data.length / 4);\n\n  for (let i=0; i < data.length; i++) {\n    let checkpoint =  i * 4;\n    newData[i]= data[checkpoint] << 16 | data[checkpoint + 1] << 8 | data[checkpoint + 2];\n  }\n\n  newData.sort((a, b) => a - b);\n\n  for (const [i, n] of newData.entries()) {\n    let checkpoint = i * 4;\n    data[checkpoint] = n >> 16;\n    data[checkpoint + 1] = (n >> 8) & 0xff;\n    data[checkpoint + 2] = n & 0xff;\n  }\n  ctx.putImageData(imgData, 0, 0);\n}\n\nexport { shufflePixels, swap, invert, sortPixels };\n","import { shufflePixels, invert, swap, sortPixels } from './transformations';\n\nconst canvas = document.getElementById('canvas');\nconst ctx = canvas.getContext('2d');\nconst invertEm = document.getElementById('invert');\nconst swapEm = document.getElementById('swapChannels');\nconst shuffleEm = document.getElementById('shuffleEm');\nconst sortButton = document.getElementById('sortEm');\nconst upload = document.getElementById('image-upload');\nconst resetButton = document.getElementById('reset');\nconst img = document.getElementById('source-image');\n\nconst uploadHandler = () => {\n  let file = upload.files[0];\n  img.src = URL.createObjectURL(file);\n}\n\nconst draw = () => {\n  canvas.height = img.height;\n  canvas.width = img.width;\n  ctx.drawImage(img, 0, 0, img.width, img.height);\n  URL.revokeObjectURL(img.src);\n}\n\nif (img.complete) {\n  draw();\n}\nimg.addEventListener('load', draw);\nupload.addEventListener('change', uploadHandler);\ninvertEm.addEventListener('click', () => invert(canvas, ctx));\nswapEm.addEventListener('click', () => {\n  swap(canvas, ctx, document.querySelector('#channel1').value, document.querySelector('#channel2').value);\n})\nsortButton.addEventListener('click', () => sortPixels(canvas, ctx));\nshuffleEm.addEventListener('click', () => shufflePixels(canvas, ctx));\nresetButton.addEventListener('click', draw);\n"]}