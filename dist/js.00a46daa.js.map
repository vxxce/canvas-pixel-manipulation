{"version":3,"sources":["js/utils.js","js/transformations.js","js/index.js"],"names":["rgbToHsl","r","g","b","min","Math","max","delta","lum","hue","sat","deltaR","deltaG","deltaB","hueToRgb","q","z","t","hslToRgb","h","s","l","shuffle","arr","i","length","randIndInRange","floor","random","swap","shufflePixels","canvas","ctx","imgData","getImageData","width","height","data","putImageData","channel1","channel2","colors","swap1","indexOf","swap2","Error","temp","invert","newData","j","push","sortPixels","checkpoint","sort","hslArr1","hslArr2","hslArr","desaturate","averageLightness","document","getElementById","getContext","invertEm","swapEm","shuffleEm","sortButton","upload","resetButton","desaturateButton","img","uploadHandler","file","files","src","URL","createObjectURL","draw","drawImage","revokeObjectURL","complete","addEventListener","querySelector","value"],"mappings":"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","file":"js.00a46daa.js","sourceRoot":"..","sourcesContent":["const rgbToHsl = (r, g, b) => {\n  r /= 255\n  g /= 255\n  b /= 255\n\n  let min = Math.min(r, g, b) //Min. value of RGB\n  let max = Math.max(r, g, b) //Max. value of RGB\n  let delta = max - min //Delta RGB value\n\n  let lum = (max + min) / 2\n\n  let hue = 0\n  let sat = 0\n  if (delta == 0) {\n    return [hue, sat, lum]\n  } else {\n    if (lum < 0.5) {\n      sat = delta / (max + min)\n    } else {\n      sat = delta / (2 - max - min)\n    }\n\n    let deltaR = ((max - r) / 6 + delta / 2) / delta\n    let deltaG = ((max - g) / 6 + delta / 2) / delta\n    let deltaB = ((max - b) / 6 + delta / 2) / delta\n\n    if (r == max) {\n      hue = deltaB - deltaG\n    } else if (g == max) {\n      hue = 1 / 3 + deltaR - deltaB\n    } else if (b == max) {\n      hue = 2 / 3 + deltaG - deltaR\n    }\n    if (hue < 0) {\n      hue += 1\n    }\n    if (hue > 1) {\n      hue -= 1\n    }\n  }\n  return [hue, sat, lum]\n}\n\nlet hueToRgb = (q, z, t) => {\n  if (t < 0) {\n    t += 1\n  }\n  if (t > 1) {\n    t -= 1\n  }\n  if (6 * t < 1) {\n    return q + (z - q) * 6 * t\n  }\n  if (2 * t < 1) {\n    return z\n  }\n  if (3 * t < 2) {\n    return q + (z - q) * (2 / 3 - t) * 6\n  }\n  return q\n}\n\nlet hslToRgb = (h, s, l) => {\n  let r = 0\n  let g = 0\n  let b = 0\n  let q = 0\n  let z = 0\n  if (s == 0) {\n    r = l * 255\n    g = l * 255\n    b = l * 255\n  } else {\n    if (l < 0.5) {\n      q = l * (1 + s)\n    } else {\n      q = l + s - s * l\n    }\n    z = 2 * l - q\n\n    r = 255 * hueToRgb(z, q, h + 1 / 3)\n    g = 255 * hueToRgb(z, q, h)\n    b = 255 * hueToRgb(z, q, h - 1 / 3)\n    return [r, g, b]\n  }\n  return [r, g, b]\n}\n\nexport { rgbToHsl, hslToRgb }\n","import { rgbToHsl, hslToRgb } from \"./utils\";\n\nconst shuffle = (arr) => {\n  for (let i = 0; i < arr.length; i++) {\n    // Every 4th index is an alpha value and should be 255. Don't change those.\n    if (i % 4 !== 3) {\n      // Selection range shrinks by one from left every loop\n      // e.g. [0, 1, 2, 3] -> [1, 2, 3] -> [2, 3] -> [3]\n      let randIndInRange = Math.floor(Math.random() * arr.length - 1) + 1\n      // If selection is on 4th index (an alpha value), re-select.\n      while (randIndInRange % 4 === 3) {\n        randIndInRange = Math.floor(Math.random() * arr.length - 1) + 1\n      }\n      // swap i and random index\n      let swap = arr[i]\n      arr[i] = arr[randIndInRange]\n      arr[randIndInRange] = swap\n    }\n  }\n  return arr\n}\n\nconst shufflePixels = (canvas, ctx) => {\n  let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n  let data = imgData.data\n  data = shuffle(data)\n  ctx.putImageData(imgData, 0, 0)\n}\n\nconst swap = (canvas, ctx, channel1, channel2) => {\n  const colors = [\"red\", \"green\", \"blue\"]\n  const swap1 = colors.indexOf(channel1)\n  const swap2 = colors.indexOf(channel2)\n  if (swap1 < 0 || swap2 < 0) throw new Error(\"Invalid Arguments\")\n  let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n  let data = imgData.data\n\n  for (let i = 0; i < data.length; i += 4) {\n    let temp = data[i + swap1]\n    data[i + swap1] = data[i + swap2]\n    data[i + swap2] = temp\n  }\n  ctx.putImageData(imgData, 0, 0)\n}\n\nconst invert = (canvas, ctx) => {\n  let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n  let data = imgData.data\n  let newData = []\n\n  for (let j = 0; j < data.length; j += 4) {\n    newData.push(255 - data[j], 255 - data[j + 1], 255 - data[j + 2], 255)\n  }\n  for (let i = 0; i < data.length; i++) {\n    data[i] = newData[i]\n  }\n  ctx.putImageData(imgData, 0, 0)\n}\n\nconst sortPixels = (canvas, ctx) => {\n\n  let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n  let data = imgData.data\n\n  let newData = []\n\n  for (let i = 0; i < data.length / 4; i++) {\n    let checkpoint = i * 4\n    newData.push(\n      rgbToHsl(data[checkpoint], data[checkpoint + 1], data[checkpoint + 2])\n    )\n  }\n\n  newData.sort((hslArr1, hslArr2) => hslArr1[0] - hslArr2[0])\n\n  for (let i in newData) {\n    let checkpoint = i * 4\n    let hslArr = newData[i]\n    let [r, g, b] = hslToRgb(...hslArr)\n    data[checkpoint] = r\n    data[checkpoint + 1] = g\n    data[checkpoint + 2] = b\n  }\n  ctx.putImageData(imgData, 0, 0)\n}\n\nconst desaturate = (canvas, ctx) => {\n  let imgData = ctx.getImageData(0, 0, canvas.width, canvas.height)\n  let data = imgData.data\n\n  for (let i = 0; i < data.length; i += 4) {\n    let averageLightness = Math.floor((data[i] + data[i + 1] + data[i + 2]) / 3)\n    data[i] = data[i + 1] = data[i + 2] = averageLightness\n  }\n  ctx.putImageData(imgData, 0, 0)\n}\n\n\nexport { shufflePixels, swap, invert, sortPixels, desaturate };\n","import { shufflePixels, invert, swap, sortPixels, desaturate } from './transformations';\n\nconst canvas = document.getElementById(\"canvas\")\nconst ctx = canvas.getContext(\"2d\")\nconst invertEm = document.getElementById(\"invert\")\nconst swapEm = document.getElementById(\"swapChannels\")\nconst shuffleEm = document.getElementById(\"shuffleEm\")\nconst sortButton = document.getElementById(\"sortEm\")\nconst upload = document.getElementById(\"image-upload\")\nconst resetButton = document.getElementById(\"reset\")\nconst desaturateButton = document.getElementById(\"desaturate\")\nconst img = document.getElementById(\"source-image\")\n\nconst uploadHandler = () => {\n  let file = upload.files[0]\n  img.src = URL.createObjectURL(file)\n}\n\nconst draw = () => {\n  canvas.height = img.height\n  canvas.width = img.width\n  ctx.drawImage(img, 0, 0, img.width, img.height)\n  URL.revokeObjectURL(img.src)\n}\n\nif (img.complete) {\n  draw()\n}\nimg.addEventListener(\"load\", draw)\nupload.addEventListener(\"change\", uploadHandler)\ninvertEm.addEventListener(\"click\", () => invert(canvas, ctx))\nswapEm.addEventListener(\"click\", () => {\n  swap(\n    canvas,\n    ctx,\n    document.querySelector(\"#channel1\").value,\n    document.querySelector(\"#channel2\").value\n  )\n})\nsortButton.addEventListener(\"click\", () => sortPixels(canvas, ctx))\nshuffleEm.addEventListener(\"click\", () => shufflePixels(canvas, ctx))\ndesaturateButton.addEventListener(\"click\", () => desaturate(canvas, ctx))\nresetButton.addEventListener(\"click\", draw)\n"]}